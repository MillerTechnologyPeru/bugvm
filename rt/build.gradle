buildscript {
     repositories {
          jcenter()
     }
     dependencies {
          classpath 'com.github.jengelman.gradle.plugins:shadow:1.2.3'
     }
}

apply plugin: 'com.github.johnrengelman.shadow'

archivesBaseName = "bugvm-rt"
description = """BugVM Runtime Library"""

dependencies {
     compile "commons-io:commons-io:2.4"
}

sourceSets {

     main {
          java {
               srcDirs = ['src', 'libcore', 'external']
          }
     }

     shadowJar {
          relocate 'org.bouncycastle', 'com.android.org.bouncycastle'
          relocate 'org.conscrypt', 'com.android.org.conscrypt'
          relocate 'com.squareup', 'com.android.com.squareup'
     }

}


jar.doFirst{
     manifest {
          attributes "Implementation-Version" : project.version
          attributes 'vm-version': '1.0.0'
     }
}

task jarSources(type:Jar){
     from sourceSets.main.getAllSource()
     classifier = 'source'
}

jar.dependsOn jarSources